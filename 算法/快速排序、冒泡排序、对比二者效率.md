# 快速排序和冒泡排序，二者效率比较

## 快速排序

```javascript
let arr1 = [1, 23, 4, 2, 5, 6, 90, 0, 2, 55, 1.3]

function quickSort(arr) {
    if (arr.length <= 1) {
        return arr;
    }
    let pivotIndex = Math.floor(arr.length / 2),
        pivot = arr.splice(pivotIndex, 1)[0],
        left = [],
        right = [];
    for (let i = 0; i < arr.length; i++) {
        if (arr[i] < pivot) {
            left.push(arr[i])
        } else {
            right.push(arr[i])
        }
    }
    return quickSort(left).concat(pivot, quickSort(right))
}

quickSort(arr1) //[0, 1, 1.3, 2, 2, 4, 5, 23, 55, 90]
```

## 冒泡排序

>考虑一个优化情况：当一次循环后就实现了排序，但后续循环依然会执行，如何避免
>>加入一个布尔值判断是否当前循环结束没有发生交换，是的话则退出循环

```javascript
function bubbleSort(arr) {
    // 数组元素两两交换，每次循环需要length-1轮
    let len = arr.length - 1;
    //外层循环数组元素，内层交换位置
    for (let i = 0; i < len; i++) {
        // 每轮排序中:需要比较的元素个数比上一轮少一个（每一轮的最后一个值一定是最大的）
        let done=true;
        for (let j = 0; j < len - i; j++) {
            if (arr[j] > arr[j + 1]) {
                // 辅助交换位置的中间变量
                let temp = arr[j + 1];
                arr[j + 1] = arr[j];
                arr[j] = temp;
                done=false;
            }
        }
        if(done){
            return;
        }
    }
    return arr;
}
```

## 二者效率比较

>为方便看出效果，编写函数生成数组
createArr();
compare();

```javascript
// 生成数组
function createArr(count){
    let arr=[];
    for(let i=0;i<count;i++){
        arr[i]=Math.floor(Math.random()*(count+1));
        arr.push(arr[i]);
    }
    return arr;
}

//计算运行时间
function compare(func,count){
    let start,stop;
    let arr=createArr(count);
    start=Date.now();
    func(arr);
    stop=Date.now();
    result=stop-start;
    console.log(result);
}

compare(bubbleSort,100);//6
compare(quickSort,100);//0
compare(bubbleSort,1000);//20
compare(quickSort,1000);//4
compare(bubbleSort,10000);//1697
compare(quickSort,10000);//12
// 单位毫秒
//具体计算时间受硬件影响
//但总体上能看出冒泡排序明显与快速排序有很大差距
```

参考：

https://www.zhihu.com/question/20063815

https://segmentfault.com/a/1190000014175918

https://segmentfault.com/a/1190000005144961#articleHeader3