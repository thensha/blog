# 输入网址后发生了什么

网站文件都是放在服务器上的，服务器地址是一串数字，为方便记忆会为其绑定一个域名。

>输入网址—DNS域名解析—建立TCP连接—发送HTTP请求—服务器处理并返回结果—浏览器生成页面

1.**域名解析**：先查找本地host文件，如果有则跳过查询直接访问对应网站的ip地址，如果无则由本地dns服务器向根dns服务器发送查询请求，并逐级向下最后查询到具体的网址ip

2.**建立tcp连接**：三次握手（客户端向服务器发送带有syn标识的数据包、服务端返回ack/syn数据包、客户端发送ack数据包）确保建立连接

3.**发送http请求**：发送请求报文（报文首部、空行、主体），报文首部包含请求行和首部信息，十分重要

4.**服务器处理**：如果是首次访问则直接返回页面资源，非首次则判断缓存文件是否需要更新，返回响应报文和相关文件

5.**浏览器生成页面**：先解析html、渲染布局

    参考地址：
    https://segmentfault.com/a/1190000012092552
    https://www.jianshu.com/p/3d8028e8b501
